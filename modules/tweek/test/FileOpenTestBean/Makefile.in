default: all

# Basic options.
srcdir=		@srcdir@
JAVAC_FLAGS=	-classpath $(CLASSPATH) -sourcepath $(srcdir) -d .
JCPS=		@JCPS@

JDOM_JAR=	@JDOM_JAR@

CLASSPATH=	$(TWEEK_BASE_DIR)/bin/TweekServices.jar$(JCPS)$(TWEEK_BASE_DIR)/bin/TweekBeans.jar$(JCPS)$(JDOM_JAR)

# Commands to execute.
JAVA_COMPILE=	@JAVAC@ $(JAVAC_FLAGS)
JAR=		@JAR@

VPATH=		@srcdir@

CLASSES=	fileopentestbean/FileOpenTestBean.class
ALL_CLASSES=	fileopentestbean/*.class

# -----------------------------------------------------------------------------
# Application build targets.
# -----------------------------------------------------------------------------
all:
	$(MAKE) java
	$(MAKE) FileOpenTestBean.jar
	-$(MAKE) install

java: $(CLASSES)

FileOpenTestBean.jar: $(CLASSES)
	$(JAR) cvfm $@ $(srcdir)/opener_test.MF $(ALL_CLASSES)

install:
	cp FileOpenTestBean.jar $(TWEEK_BASE_DIR)/bin/beans
	cp $(srcdir)/FileOpenTestBean.xml $(TWEEK_BASE_DIR)/bin/beans

# Suffix rules for building object files.
.SUFFIXES: .java .class

.java.class:
	$(JAVA_COMPILE) $<

# -----------------------------------------------------------------------------
# Clean-up targets.
# -----------------------------------------------------------------------------
clean:
	rm -f $(ALL_CLASSES)

clobber:
	@$(MAKE) clean
	rm -f FileOpenTestBean.jar
