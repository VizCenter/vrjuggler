default: all

# Basic options.
srcdir			= @srcdir@
JAVAC_FLAGS		= -classpath $(CLASSPATH) -sourcepath $(srcdir) -d .
JCPS			= @JCPS@

JDOM_JAR		= @JDOM_JAR@

CLASSPATH		= $(TWEEK_BASE_DIR)/bin/TweekServices.jar$(JCPS)$(TWEEK_BASE_DIR)/bin/TweekBeans.jar$(JCPS)$(JDOM_JAR)

# Commands to execute.
JAVA_COMPILE		= @JAVAC@ $(JAVAC_FLAGS)
JAR			= @JAR@

VPATH		= @srcdir@

CLASSES		= prefstestbean/PrefsTestBean.class
ALL_CLASSES	= prefstestbean/*.class

# -----------------------------------------------------------------------------
# Application build targets.
# -----------------------------------------------------------------------------
all:
	$(MAKE) java
	$(MAKE) PrefsTestBean.jar
	-$(MAKE) install

java: $(CLASSES)

PrefsTestBean.jar: $(CLASSES)
	$(JAR) cvfm $@ $(srcdir)/prefs_test.MF $(ALL_CLASSES)

install:
	cp PrefsTestBean.jar $(TWEEK_BASE_DIR)/bin/beans
	cp $(srcdir)/PrefsTestBean.xml $(TWEEK_BASE_DIR)/bin/beans

# Suffix rules for building object files.
.SUFFIXES: .java .class

.java.class:
	$(JAVA_COMPILE) $<

# -----------------------------------------------------------------------------
# Clean-up targets.
# -----------------------------------------------------------------------------
clean:
	rm -rf prefstestbean

clobber:
	@$(MAKE) clean
	rm -f PrefsTestBean.jar
