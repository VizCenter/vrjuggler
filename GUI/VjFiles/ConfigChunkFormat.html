<html>

<title>Description of Config File format</title>

<body bgcolor="#ffffcc">
<h2><img src="juggler.gif"></img>
File Format for VR Juggler Config Files</H2>

<h3>Overview</h3>

The config files used by VR Juggler and the VjControl program are ASCII
text files based around the idea of "ConfigChunks" - logical groupings of
configuration for particular parts of a system (e.g. displays, input
devices, or simulators).  The different kinds of ConfigChunks are defined
in ChunkDesc files.

<p>
It's important to note that you should load the ChunkDesc files describing
the available Chunks before loading a config file - otherwise the config 
file won't parse correctly.

<p>
Here's an example config file with two entries:

<pre>
display
  Name { "simView" }
  projectiontype { "front" }
  origin { 0 0 }
  size { 600 600 }
  pipe { 0 }
  stereo { False }
  border { True }
  simulator { True }
  simCamera { "CameraProxy" }
  end
flock
  Name { "flock 1" }
  Port { "/dev/tty52" }
  Baud { 38400 }
  num { 1 }
  translate { 0 0 0 }
  rotate { 180.0 0 0 }
  end
End
</pre>

<p>
As you can see, this file defines two chunks.  The first is of type Display
(i.e. is uses a ChunkDesc whose token is "Display"). The name of this chunk
is "simView".  All Chunks must have a unique name - if none is given, the
parser will give it a geeky default name like "Display_42"
and all the other Chunks will make fun of it.

<p>
The remaining properties are defined by the ChunkDesc for Display.  Each
line gives the token for one of the properties followed by a list of
values (the type and allowed number of values are also defined in the
ChunkDesc).

<h3>Reference</h3>

<h4>General Rules</h4>
<ol>
<li>Config files are generally non-case-sensitive.  For example, 
"end", "End", and "eND" are all valid ways to end a chunk or a file.
Similarly, "Display" in the above example could have been written "DISPLAY",
and still would have used the same ChunkDesc.  The main exception to this
is the contents of string values, which may well be used in a case sensitive
manner.  An 
obvious example is a string containing the name of a file on a UNIX
file system.
<li>The following keywords are reserved in ChunkDesc files: <tt>
end,</tt> and generally any word 
with the prefix <tt>vj_</tt>.
<li>Strings (names, help strings, etc.) should always be surrounded
by quotes.
<li>Strings cannot contain line breaks or quotes</li>
<li>In general, the ChunkDesc parser treats all whitespace the same,
so it is possible for parts of a line to be broken up for greater
readability.
</ol>

<h4>Config Files</h4>
The general format of a config file is:

<pre>
<i>ConfigChunk1</i>
<i>ConfigChunk2</i>
...
End
</pre>

That is, zero or more ConfigChunks followed by the token <tt>End</tt>.
<p>
Several forms of comments are allowed inside the files.  C-style
comments (/* comment */) can be used to comment out blocks of text.
Shell and C++ comments (# and //) can be used to comment out text to the
next endline character.
<p>
Note that the vjcontrol program does not preserve comments in the files
that it loads and saves, so this is mostly useful as a quick hack or as
a debugging feature.

<h4>ConfigChunks</h4>

The basic format of a ConfigChunk is:

<pre>
<i>token</i>
  Name { "name" }
  <i>propertytoken</i> { <i>value1</i> <i>value2</i> ... }
  ...
  end

</pre>

The first line contains only the token of the ChunkDesc that this
ConfigChunk uses (note that in general, where tokens of ChunkDescs or
PropertyDescs are used, they are not put in quotes, though this would
be allowed).
<p>
The second line should always be the Name property.  This is followed by
any other Property lines, and finally by end.  Note that it is not
strictly necessary to include all of the Properties defined in the Chunk's
description.  Those that are omitted will be filled in with default values
(0, 0.0, false, "").  Omitted properties that allow variable numbers of
values will start out with no values at all.

<h4>Property Lines</h4>
The format for any property line is this:
<pre>
  <i>token</i> { <i>value1</i> <i>value2</i> ... }
</pre>

Where token is the token for one of the properties defined in the ChunkDesc.
Values is a list of 0 or more values separated by whitespace.  The
surrounding curly braces should be considered mandatory.
<p>
The format for a value varies depending upon type.  Integers and Floats
are simply represented as numbers: 0, 42, 44.556, etc. (Warning: vjcontrol
doesn't parse scientific notation for floats).  String values are simply
represented as quoted text strings.  Boolean values are represented as
the strings "True" and "False" (case is irrelevant, and quotes unneccessary).
<p>

<h4>Properties with Enumerations</h4>
Some Properties are defined to have a set of named values.  If this is
the case, the values in the property line can be either names defined in
the enumeration or actual values (the example below of an int Property 
with an enumeration includes one value of each type).

<h4>Example Property Lines</h4>
<pre>
     stringproperty { "a string value" "a second string value" }
     intproperty { 42 }
     floatproperty { 42.0 43.0 }
     booleanproperty { True }
     intproperty_with_enumeration { "a name from the enumeration" 42 }
</pre>


